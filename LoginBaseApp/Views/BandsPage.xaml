<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="LoginBaseApp.Views.BandsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:LoginBaseApp.Models"
    xmlns:viewmodels="clr-namespace:LoginBaseApp.ViewModels"
    Title="BandsPage"
    x:DataType="viewmodels:BandsPageViewModel"
    BackgroundColor="White">

    <Grid RowDefinitions="*,*">

        <Grid Grid.Row="0" RowDefinitions="Auto,*">
            <Label
                HorizontalOptions="Center"
                Style="{StaticResource HeaderLabel}"
                Text="חברי הלהקה"
                TextColor="{StaticResource DefaultTextColor}"
                VerticalOptions="Center" />
            <CollectionView
                Grid.Row="1"
                ItemsSource="{Binding SelectedUsers}"
                SelectionMode="Single">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:User">
                        <Border
                            Margin="5"
                            Padding="10"
                            BackgroundColor="White"
                            HeightRequest="65"
                            Stroke="Transparent"
                            StrokeShape="RoundRectangle 8">
                            <Grid Background="white" ColumnDefinitions="50,50,*,100">
                                <Image
                                    Grid.Column="0"
                                    Aspect="AspectFill"
                                    HeightRequest="30"
                                    Source="{Binding Instrument.Picture, TargetNullValue='solkey.png'}"
                                    WidthRequest="30" />
                                <Image
                                    Grid.Column="1"
                                    Aspect="AspectFill"
                                    HeightRequest="30"
                                    Source="{Binding Avatar, TargetNullValue='avatar_default.png'}"
                                    WidthRequest="30" />
                                <Label
                                    Grid.Column="2"
                                    FontSize="18"
                                    Text="{Binding FullName}"
                                    TextColor="{StaticResource PrimaryColor}"
                                    VerticalOptions="Center" />
                                <Button
                                    Grid.Column="3"
                                    BackgroundColor="{StaticResource SecondaryColor}"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:BandsPageViewModel}}, Path=RemoveUserCommand}"
                                    CommandParameter="{Binding .}"
                                    Text="הסר נגן" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>


        <Grid Grid.Row="1" RowDefinitions="Auto,*">
            <Label
                HorizontalOptions="Center"
                Style="{StaticResource HeaderLabel}"
                Text="נגנים לא בלהקה"
                TextColor="{StaticResource DefaultTextColor}"
                VerticalOptions="Center" />
            <CollectionView
                Grid.Row="1"
                ItemsSource="{Binding UnselectedUsers}"
                SelectionMode="Single">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:User">
                        <Border
                            Margin="5"
                            Padding="10"
                            BackgroundColor="White"
                            HeightRequest="65"
                            Stroke="Transparent"
                            StrokeShape="RoundRectangle 8">
                            <Grid Background="white" ColumnDefinitions="50,50,*,100">
                                <Image
                                    Grid.Column="0"
                                    Aspect="AspectFill"
                                    HeightRequest="30"
                                    Source="{Binding Instrument.Picture, TargetNullValue='solkey.png'}"
                                    WidthRequest="30" />
                                <Image
                                    Grid.Column="1"
                                    Aspect="AspectFill"
                                    HeightRequest="30"
                                    Source="{Binding Avatar, TargetNullValue='avatar_default.png'}"
                                    WidthRequest="30" />
                                <Label
                                    Grid.Column="2"
                                    FontSize="18"
                                    Text="{Binding FullName}"
                                    TextColor="{StaticResource PrimaryColor}"
                                    VerticalOptions="Center" />
                                <Button
                                    Grid.Column="3"
                                    BackgroundColor="{StaticResource PrimaryColor}"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:BandsPageViewModel}}, Path=AddUserCommand}"
                                    CommandParameter="{Binding .}"
                                    Text="הוסף נגן" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </Grid>
</ContentPage>
